<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ML Energy Dashboard</title>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

    <style>
        /* ---------- DASHBOARD LAYOUT ---------- */
        .dash-container {
            width: 95%;
            max-width: 1200px;
            margin: auto;
        }

        .tabs {
            display: flex;
            gap: 12px;
            margin-bottom: 25px;
            overflow-x: auto;
        }

        .tab {
            padding: 10px 18px;
            border-radius: 20px;
            border: none;
            background: #f1f5f9;
            cursor: pointer;
            font-weight: 600;
            white-space: nowrap;
        }

        .tab.active {
            background: linear-gradient(135deg, #6366f1, #3b82f6);
            color: white;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* ---------- CARDS ---------- */
        .card-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 22px;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-card h3 {
            font-size: 15px;
            color: #64748b;
        }

        .stat-card p {
            font-size: 28px;
            font-weight: 700;
            margin-top: 6px;
        }

        /* ---------- PREDICTION FORM ---------- */
        .predict-box {
            background: white;
            padding: 25px;
            border-radius: 18px;
            box-shadow: 0 12px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .predict-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 14px;
        }

        .predict-grid input {
            padding: 12px;
            border-radius: 10px;
            border: 1px solid #cbd5e1;
        }

        .predict-btn {
            margin-top: 18px;
            padding: 14px;
            width: 100%;
            border-radius: 14px;
            border: none;
            background: linear-gradient(135deg, #22c55e, #4ade80);
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }

        /* ---------- CHART BOX ---------- */
        .chart-box {
            background: white;
            padding: 25px;
            border-radius: 18px;
            box-shadow: 0 12px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .chart-title {
            font-weight: 600;
            margin-bottom: 10px;
        }

        .insight {
            background: #eef2ff;
            padding: 16px;
            border-radius: 14px;
            color: #4338ca;
            font-size: 14px;
        }
    </style>
</head>

<body>
<div class="dash-container">

    <h1>üè¢ Machine Learning Energy Dashboard</h1>
    <p style="color:#64748b">Predict & analyze building energy efficiency</p>

    <!-- TABS -->
    <div class="tabs">
        <button class="tab active" onclick="openTab('overview')">Overview</button>
        <button class="tab" onclick="openTab('analysis')">Data Analysis</button>
        <button class="tab" onclick="openTab('importance')">Feature Importance</button>
    </div>

    <!-- ================= OVERVIEW ================= -->
    <div id="overview" class="section active">

        <div class="card-row">
            <div class="stat-card">
                <h3>Total Samples</h3>
                <p>768</p>
            </div>
            <div class="stat-card">
                <h3>Avg Heating Load</h3>
                <p>22.3</p>
            </div>
            <div class="stat-card">
                <h3>Avg Cooling Load</h3>
                <p>24.6</p>
            </div>
            <div class="stat-card">
                <h3>Model R¬≤</h3>
                <p>0.99</p>
            </div>
        </div>

        <!-- Prediction -->
        <div class="predict-box">
            <h3>üîÆ Predict Energy Consumption</h3>

            <form action="/predict" method="post">
                <div class="predict-grid">
                    <input name="Relative_Compactness" placeholder="Relative Compactness" required>
                    <input name="Surface_Area" placeholder="Surface Area" required>
                    <input name="Wall_Area" placeholder="Wall Area" required>
                    <input name="Roof_Area" placeholder="Roof Area" required>
                    <input name="Overall_Height" placeholder="Overall Height" required>
                    <input name="Orientation" placeholder="Orientation" required>
                    <input name="Glazing_Area" placeholder="Glazing Area" required>
                    <input name="Glazing_Area_Distribution" placeholder="Glazing Distribution" required>
                </div>
                <button class="predict-btn">‚ö° Predict Energy</button>
            </form>
        </div>
    </div>

    <!-- ================= DATA ANALYSIS ================= -->
    <div id="analysis" class="section">

        <div class="chart-box">
            <div class="chart-title">Compactness Impact on Energy Loads</div>
            <canvas id="lineChart"></canvas>
        </div>
    </div>

    <!-- ================= FEATURE IMPORTANCE ================= -->
    <div id="importance" class="section">

        <div class="chart-box">
            <div class="chart-title">Feature Importance Analysis</div>
            <canvas id="barChart"></canvas>
        </div>

        <div class="insight">
            <strong>Key Insight:</strong> Relative Compactness and Overall Height are the
            strongest predictors of energy efficiency.
        </div>
    </div>

</div>

<script>
/* ---------- TABS ---------- */
function openTab(id) {
    document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
    document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
    document.getElementById(id).classList.add("active");
    event.target.classList.add("active");
}

/* ---------- LINE CHART ---------- */
new Chart(document.getElementById("lineChart"), {
    type: "line",
    data: {
        labels: [0.62,0.66,0.70,0.74,0.78,0.82,0.86,0.90,0.94,0.98],
        datasets: [
            {
                label: "Heating Load",
                data: [36,32,28,24,20,17,14,12,10,9],
                borderColor: "#f97316",
                tension: 0.4
            },
            {
                label: "Cooling Load",
                data: [28,25,22,19,16,14,12,10,9,8],
                borderColor: "#3b82f6",
                tension: 0.4
            }
        ]
    }
});

/* ---------- BAR CHART ---------- */
new Chart(document.getElementById("barChart"), {
    type: "bar",
    data: {
        labels: [
            "Relative Compactness","Overall Height","Glazing Area",
            "Surface Area","Wall Area","Roof Area","Glazing Dist","Orientation"
        ],
        datasets: [{
            data: [95,90,82,75,70,62,35,12],
            backgroundColor: [
                "#6366f1","#7c3aed","#8b5cf6","#a78bfa",
                "#c4b5fd","#ddd6fe","#ede9fe","#f5f3ff"
            ],
            borderRadius: 10
        }]
    },
    options: {
        indexAxis: "y",
        plugins: { legend: { display: false } }
    }
});
</script>

</body>
</html>
